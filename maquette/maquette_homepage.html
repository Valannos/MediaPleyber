<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8" />
    <title>Médiathèque de Pleyber-Christ</title>

    <link href="https://fonts.googleapis.com/css?family=Merriweather|Noto+Sans" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="css/navbar.css" />
    <link rel="stylesheet" href="css/sections.css" />
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/footer.css" />




</head>

<body>
    <span class="maquette">&lt;BODY</span>
    <header>
        <span class="maquette">&lt;HEADER></span>
        <div>
            <img src="" alt="city_logo" width="219" height="136">
        </div>
        <div>
            <img src="" alt="city_photo" width="415" height="136">
        </div>



    </header>










    <nav class="desktop_toolbar">

        <span class="maquette">&lt;NAV></span>
        <div>
            <span class="maquette">&lt;DIV> - TITLE></span>
            <h1>Library Name</h1>
        </div>

        <div>
            <span class="maquette">&lt;DIV> - DESKTOP NAVBAR></span>
            <a href="maquette_homepage.html"><h3>Home</h3></a>
            <a href="maquette_new_content.html"><h3>New Content</h3></a>
             <a href="maquette_login.html"><h3>Login <i class="fa fa-sign-in" aria-hidden="true"></i></h3></a>
            <a href="maquette_catalogue.html"><h3>Catalogue</h3></a>
            <a href="maquette_informations.html">
                <h3>Informations</h3></a>
            <a href="maquette_my_loans.html"><h3>My Loans</h3></a>

            <a href="maquette_manager.html"><h3 class="gestion">Manager</h3></a>
            <a href="">
                <h3 class="gestion">
                        Manager_Username
                        <i class="fa fa-sign-out" aria-hidden="true"></i></h3></a>
        </div>
    </nav>


    <div class="smartphone_toolbar">
        <span class="maquette">&lt;DIV> - MOBILE NAVBAR</span>
        <h1>Library Name</h1>

        <div class="icon-bar">
            <a href="maquette_my_loans.html" title="Access your own loans and reservations"><i class="fa fa-book" aria-hidden="true"></i></a>
            <a class="gestion" href="maquette_manager.html" title="Handle with loans and reservations"><i class="fa fa-lock" aria-hidden="true"></i></a>
            <a href="" title="loggout"><i class="fa fa-user-times" aria-hidden="true"></i></a>
        </div>
        <div class="icon-bar">
            <a href="maquette_catalogue.html" title="Homepage"><i class="fa fa-home"></i></a>
            <a href="maquette_new_content.html" title="Nouveautés"><i class="fa fa-star" aria-hidden="true"></i></a>
 <a href="maquette_login.html" title="Se connecter"><i class="fa fa-sign-in" aria-hidden="true"></i></a>
            <a href="maquette_catalogue.html" title="Consulter le catalogue"><i class="fa fa-leanpub" aria-hidden="true"></i></a>
            <a href="maquette_informations.html" title="Informations"><i class="fa fa-info-circle" aria-hidden="true"></i></a>
        </div>
    </div>





    <section>
        <span class="maquette">&lt;SECTION></span>
        <h2><span class="maquette">&lt;H2></span> Welcome message</h2>

        <div>
            <span class="maquette">&lt;DIV> - SHORT PRESENTATION</span>
            <article>
                <span class="maquette">&lt;ARTICLE></span>
                <p>
                    Est susîcpit a ad urna rûtrum nec euismod eget elit adipiscing, dictum eget congue primiés
                    dapidûs l'férmentum augueé dicûm péer ut, neque tincidunt èst aliquam mattisé viverra férmentum sociosqu dui sollicitudin fermentum.<br/> Lorem
                    suscipit 9 806€ praesent "sélecrum" séllicitudén a blandît, at congés ut augue liçlà amet faucibus porta, egéstat fuegiuia c'est etiam placérat donec sociosqu mié èst.</p>
            </article>
        </div>

        <div>

            <article>
                <span class="maquette">&lt;ARTICLE></span>
                <img class="photo_mediatheque" alt="photo_library_01" src='/img/mediatheque 2010 1.jpg' width='425' height='282.5'>
            </article>
            <article>
                <span class="maquette">&lt;ARTICLE></span>
                <img class="photo_mediatheque" alt="photo_library_02" src='/img/mediatheque 2010 2.jpg' width='425' height='282.5'>
            </article>
        </div>
        <h3><span class="maquette">&lt;H3></span>Rooms</h3>
        <div>
            <span class="maquette">&lt;DIV> - ROOMS</span>
            <article>
                <span class="maquette">&lt;ARTICLE></span>
                <dl>
                    <dt><strong>Room name</strong></dt>
                    <dd>Curae magna pellentesque famès amet félis, rutrum ullamcorper ac portitorsé, dicûm ligula accumasa nîbh.</dd>
                    <dd>Semper ïd tristiqué quis volutpat nunc risus vivamùs.</dd>

                </dl>
            </article>
            <article>
                <span class="maquette">&lt;ARTICLE></span>
                <dl>
                    <dt><strong>Room name</strong></dt>
                    <dd>Diam cursus mollis accumsan grâvida aénean arcu conubié susîcpit nètus turpis.
                        <dd>Lorem tacîtié laoreet molestié urna massa posuere, ïn accumasa lacîna aliquam eu.</dd>
                </dl>
            </article>

        </div>





        <h3><span class="maquette">&lt;H3></span>Events <i class="fa fa-handshake-o" aria-hidden="true"></i></h3>
        <div>
            <span class="maquette">&lt;DIV> - EVENTS BLOCK</span>
            <article id="eventsBlock">
                <span class="maquette">&lt;ARTICLE></span>
                <p>Several events are organised by library</p>
                <span class="maquette">&lt;BUTTON> - (Will fade out on clicking)</span>
                <button id="event">Click to get upcoming events</button>
                <div class="eventContent">
                  <span class="maquette">&lt;DIV> - EVENT (Apprears through AJAX request)</span>
                    <h4 class="eventTitle">Event Name</h4>
                    <p>Event description</p>
                    <h4>On the DD / MM / YYYY at HHhMM, Library.</h4>
                </div>
            </article>
        </div>
    </section>
    <script>
        console.log('AJAX Request');

        var eventBtn = document.getElementById('event');





        eventBtn.onclick = function() {

            var xmlhttp = new XMLHttpRequest();


            xmlhttp.onreadystatechange = function() {
                if (this.readyState === 4) {
                    if (this.status === 200) {







                        eventBtn.setAttribute("class", "hidden");
                        console.log(this.responseText);
                        gotEvents = JSON.parse(this.responseText);

                        for (var i = 0; i < gotEvents.length; i++) {

                            divEvent = document.createElement('div');
                            divEvent.setAttribute("class", "eventContent");

                            eventTitle = document.createElement('h4');
                            eventTitle.innerHTML = gotEvents[i].title;
                            eventTitle.setAttribute("class", "eventTitle");

                            eventDesc = document.createElement('p');
                            eventDesc.innerHTML = gotEvents[i].description;

                            eventInfos = document.createElement('h4');

                            date = gotEvents[i].date.date;
                            console.log(gotEvents[i].date);
                            year = date.substring(0, 4);
                            month = date.substring(5, 7);
                            day = date.substring(8, 10);
                            hour = date.substring(11, 13);
                            minutes = date.substring(14, 16);



                            eventInfos.innerHTML = "Le " + day + ' / ' + month + " / " + year + " à " + hour + "h" + minutes + ", " + gotEvents[i].lieu + ".";

                            divEvent.appendChild(eventTitle);
                            divEvent.appendChild(eventDesc);
                            divEvent.appendChild(eventInfos);

                            document.getElementById('eventsBlock').appendChild(divEvent);
                        }
                    } else {
                        console.log(xmlhttp.statusText);
                    }
                }

            };
            xmlhttp.open("GET", "/public/events");
            xmlhttp.send();
        };
    </script>




    <footer>
        <span class="maquette">&lt;FOOTER></span>
        <h6><i class="fa fa-copyright" aria-hidden="true"></i> Mediathèque de Playber-Christ</h6>
        <h6>Website created by Rémi Vanel</h6>

    </footer>



</body>

</html>
